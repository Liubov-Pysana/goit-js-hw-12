{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '43884583-1aaf199fc122235264ed6db18';\nimport axios from 'axios';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchPhotosByQuery = async (query, page, perPage) => {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page: page,\n  });\n\n  const response = await axios.get(`${BASE_URL}?${searchParams}`);\n  if (response.status != 200) {\n    throw Error(response.statusText);\n  }\n\n  return response.data;\n};\n","export const renderGallery = hits => {\n  return hits\n    .map(\n      hit => `<li>\n        <div class='preview'>\n            <a href='${hit.largeImageURL}'><img src='${hit.webformatURL}' alt=\"${hit.tags}\"/></a>\n            <div class=\"stats\">\n                <div><span class='stat-title'>Likes</span><span>${hit.likes}</span></div>\n                <div><span class='stat-title'>Views</span><span>${hit.views}</span></div>\n                <div><span class='stat-title'>Comments</span><span>${hit.comments}</span></div>\n                <div><span class='stat-title'>Downloads</span><span>${hit.downloads}</span></div>\n            </div>\n        </div>\n  </li>`\n    )\n    .join('');\n};\n\nexport const showElement = (element, display) => {\n  element.style.display = display || 'block';\n};\n\nexport const hideElement = element => {\n  element.style.display = 'none';\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchPhotosByQuery } from './js/pixabay-api.js';\nimport { renderGallery, hideElement, showElement } from './js/render-functions';\n\nconst form = document.getElementById('search-form');\nconst input = document.getElementById('search-input');\nconst results = document.getElementById('results');\nconst loadingIndicator = document.getElementById('loading-indicator');\nconst loadMore = document.getElementById('load-more');\nconst imagesPerPage = 15;\nlet currentPage = 1;\nlet query = '';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  /* options */\n});\n\nfunction showError(message) {\n  iziToast.show({\n    message: message,\n    position: 'topRight',\n    timeout: 2000,\n    color: 'red',\n  });\n}\n\nasync function loadImages() {\n  if (query === '') {\n    showError('Please, enter the search query!');\n    return;\n  }\n\n  showElement(loadingIndicator);\n\n  try {\n    const result = await fetchPhotosByQuery(query, currentPage, imagesPerPage);\n    console.log(result);\n    if (result.total === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    results.innerHTML = results.innerHTML + renderGallery(result.hits);\n    lightbox.refresh();\n\n    if (currentPage * imagesPerPage >= result.totalHits) {\n      showError(\"We're sorry, but you've reached the end of search results.\");\n      hideElement(loadMore);\n    }\n  } catch (error) {\n    showError('Sorry, some error occured. Please, try again!');\n  }\n\n  hideElement(loadingIndicator);\n}\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  currentPage = 1;\n  query = input.value.trim();\n  results.innerHTML = '';\n\n  await loadImages();\n\n  showElement(loadMore, 'inline-block');\n});\n\nloadMore.addEventListener('click', async e => {\n  currentPage++;\n  await loadImages();\n  let rect = document.querySelector('#results li').getBoundingClientRect();\n  console.log(rect);\n  setTimeout(\n    () =>\n      window.scrollBy({\n        top: rect.height * 2,\n        left: 0,\n        behavior: 'smooth',\n      }),\n    300\n  );\n});\n"],"names":["API_KEY","BASE_URL","fetchPhotosByQuery","query","page","perPage","searchParams","response","axios","renderGallery","hits","hit","showElement","element","display","hideElement","form","input","results","loadingIndicator","loadMore","imagesPerPage","currentPage","lightbox","SimpleLightbox","showError","message","iziToast","loadImages","result","rect"],"mappings":"owBAAA,MAAMA,EAAU,qCAEVC,EAAW,2BAEJC,EAAqB,MAAOC,EAAOC,EAAMC,IAAY,CAChE,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUE,EACV,KAAMD,CACV,CAAG,EAEKG,EAAW,MAAMC,EAAM,IAAI,GAAGP,CAAQ,IAAIK,CAAY,EAAE,EAC9D,GAAIC,EAAS,QAAU,IACrB,MAAM,MAAMA,EAAS,UAAU,EAGjC,OAAOA,EAAS,IAClB,ECrBaE,EAAgBC,GACpBA,EACJ,IACCC,GAAO;AAAA;AAAA,uBAEUA,EAAI,aAAa,eAAeA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,kEAEvBA,EAAI,KAAK;AAAA,kEACTA,EAAI,KAAK;AAAA,qEACNA,EAAI,QAAQ;AAAA,sEACXA,EAAI,SAAS;AAAA;AAAA;AAAA,QAI9E,EACA,KAAK,EAAE,EAGCC,EAAc,CAACC,EAASC,IAAY,CAC/CD,EAAQ,MAAM,QAAUC,GAAW,OACrC,EAEaC,EAAcF,GAAW,CACpCA,EAAQ,MAAM,QAAU,MAC1B,ECfMG,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAQ,SAAS,eAAe,cAAc,EAC9CC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAmB,SAAS,eAAe,mBAAmB,EAC9DC,EAAW,SAAS,eAAe,WAAW,EAC9CC,EAAgB,GACtB,IAAIC,EAAc,EACdnB,EAAQ,GAEZ,MAAMoB,EAAW,IAAIC,EAAe,aAAc,CAElD,CAAC,EAED,SAASC,EAAUC,EAAS,CAC1BC,EAAS,KAAK,CACZ,QAASD,EACT,SAAU,WACV,QAAS,IACT,MAAO,KACX,CAAG,CACH,CAEA,eAAeE,GAAa,CAC1B,GAAIzB,IAAU,GAAI,CAChBsB,EAAU,iCAAiC,EAC3C,MACD,CAEDb,EAAYO,CAAgB,EAE5B,GAAI,CACF,MAAMU,EAAS,MAAM3B,EAAmBC,EAAOmB,EAAaD,CAAa,EAEzE,GADA,QAAQ,IAAIQ,CAAM,EACdA,EAAO,QAAU,EAAG,CACtBJ,EACE,0EACR,EACM,MACD,CAEDP,EAAQ,UAAYA,EAAQ,UAAYT,EAAcoB,EAAO,IAAI,EACjEN,EAAS,QAAO,EAEZD,EAAcD,GAAiBQ,EAAO,YACxCJ,EAAU,4DAA4D,EACtEV,EAAYK,CAAQ,EAEvB,MAAe,CACdK,EAAU,+CAA+C,CAC1D,CAEDV,EAAYI,CAAgB,CAC9B,CAEAH,EAAK,iBAAiB,SAAU,MAAM,GAAK,CACzC,EAAE,eAAc,EAEhBM,EAAc,EACdnB,EAAQc,EAAM,MAAM,OACpBC,EAAQ,UAAY,GAEpB,MAAMU,EAAU,EAEhBhB,EAAYQ,EAAU,cAAc,CACtC,CAAC,EAEDA,EAAS,iBAAiB,QAAS,MAAM,GAAK,CAC5CE,IACA,MAAMM,EAAU,EAChB,IAAIE,EAAO,SAAS,cAAc,aAAa,EAAE,sBAAqB,EACtE,QAAQ,IAAIA,CAAI,EAChB,WACE,IACE,OAAO,SAAS,CACd,IAAKA,EAAK,OAAS,EACnB,KAAM,EACN,SAAU,QAClB,CAAO,EACH,GACJ,CACA,CAAC"}